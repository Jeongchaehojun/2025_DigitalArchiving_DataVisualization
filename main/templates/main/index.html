{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Orbitron:wght@400;700;900&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0e13;
            --bg-card: #111827;
            --bg-hover: #1f2937;
            --gold-primary: #c89b3c;
            --gold-secondary: #f0e6d2;
            --blue-accent: #0ac8b9;
            --red-accent: #ff4655;
            --purple-accent: #9333ea;
            --text-primary: #f0e6d2;
            --text-secondary: #a09b8c;
            --border-color: #3c3c41;
            --gradient-gold: linear-gradient(135deg, #785a28 0%, #c8aa6e 50%, #c89b3c 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            background-image:
                radial-gradient(ellipse at top, rgba(200, 155, 60, 0.05) 0%, transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(10, 200, 185, 0.03) 0%, transparent 40%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
        }

        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 900;
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            letter-spacing: 2px;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Main Feature Cards - í¬ê²Œ ì¤‘ì•™ ë°°ì¹˜ */
        .main-features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .main-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 50px 40px;
            text-decoration: none;
            color: inherit;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            text-align: center;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-gold);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .main-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .main-card:hover::before {
            transform: scaleX(1);
        }

        /* Story Card */
        .main-card.story-card {
            background: linear-gradient(145deg, #0f1923 0%, #111827 100%);
            border-color: var(--blue-accent);
        }

        .main-card.story-card::before {
            background: linear-gradient(90deg, var(--blue-accent), var(--gold-primary));
        }

        .main-card.story-card:hover {
            border-color: var(--blue-accent);
            box-shadow: 0 25px 50px rgba(10, 200, 185, 0.3);
        }

        .main-card.story-card .main-card-title {
            color: var(--blue-accent);
        }

        /* Stats Card */
        .main-card.stats-card {
            background: linear-gradient(145deg, #1a1520 0%, #111827 100%);
            border-color: var(--gold-primary);
        }

        .main-card.stats-card:hover {
            border-color: var(--gold-primary);
            box-shadow: 0 25px 50px rgba(200, 155, 60, 0.3);
        }

        .main-card-icon {
            font-size: 5rem;
            margin-bottom: 24px;
            display: block;
        }

        .main-card-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold-primary);
            margin-bottom: 16px;
            letter-spacing: 2px;
        }

        .main-card-desc {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.05rem;
            margin-bottom: 24px;
        }

        .main-card-arrow {
            font-size: 2rem;
            color: var(--gold-primary);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
        }

        .main-card:hover .main-card-arrow {
            opacity: 1;
            transform: translateY(0);
        }

        .main-card.story-card .main-card-arrow {
            color: var(--blue-accent);
        }

        /* Sub Feature Cards - ì‘ê²Œ í•˜ë‹¨ ë°°ì¹˜ */
        .sub-features {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 50px;
        }

        .sub-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 16px 28px;
            text-decoration: none;
            color: inherit;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
        }

        .sub-card:hover {
            border-color: var(--text-secondary);
            background: var(--bg-hover);
            transform: translateY(-3px);
        }

        .sub-card-icon {
            font-size: 1.3rem;
        }

        .sub-card-text {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Conclusion Section */
        .conclusion-section {
            background: linear-gradient(145deg, #141a24 0%, #0f1318 100%);
            border: 2px solid var(--purple-accent);
            border-radius: 20px;
            padding: 50px;
            margin-bottom: 50px;
            position: relative;
            overflow: hidden;
        }

        .conclusion-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--purple-accent), var(--gold-primary), var(--blue-accent));
        }

        .conclusion-badge {
            display: inline-block;
            background: var(--purple-accent);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        .conclusion-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.6rem;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.5;
        }

        .conclusion-highlight {
            color: var(--purple-accent);
        }

        .conclusion-content {
            color: var(--text-secondary);
            line-height: 2;
            font-size: 1rem;
        }

        .conclusion-content p {
            margin-bottom: 20px;
        }

        .conclusion-content p:last-child {
            margin-bottom: 0;
        }

        .conclusion-quote {
            background: rgba(147, 51, 234, 0.1);
            border-left: 4px solid var(--purple-accent);
            padding: 20px 24px;
            margin: 24px 0;
            border-radius: 0 12px 12px 0;
            font-style: italic;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .conclusion-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 24px;
        }

        .conclusion-keyword {
            background: rgba(147, 51, 234, 0.15);
            color: var(--purple-accent);
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid rgba(147, 51, 234, 0.3);
        }

        /* Section Title */
        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--gold-primary);
            margin-bottom: 24px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
            letter-spacing: 2px;
        }

        /* Match Table */
        .table-container {
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .match-table {
            width: 100%;
            border-collapse: collapse;
        }

        .match-table th {
            background: linear-gradient(180deg, #1a2332 0%, #111827 100%);
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: var(--gold-primary);
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
            border-bottom: 2px solid var(--gold-primary);
        }

        .match-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .match-table tbody tr {
            transition: all 0.2s ease;
        }

        .match-table tbody tr:hover {
            background: var(--bg-hover);
        }

        .match-link {
            color: var(--blue-accent);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .match-link:hover {
            color: var(--gold-primary);
            text-decoration: underline;
        }

        .team-logo-small {
            width: 24px;
            height: 24px;
            object-fit: contain;
            vertical-align: middle;
        }

        .winner-badge {
            background: rgba(200, 155, 60, 0.2);
            color: var(--gold-primary);
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .empty-state h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .empty-state p {
            color: var(--text-secondary);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* ì°¨íŠ¸ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .charts-section {
            margin-bottom: 50px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .chart-card {
            background: linear-gradient(145deg, rgba(17, 24, 39, 0.9) 0%, rgba(15, 23, 42, 0.95) 100%);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            border-color: var(--gold-primary);
            box-shadow: 0 8px 32px rgba(200, 155, 60, 0.15);
            transform: translateY(-4px);
        }

        .chart-card-wide {
            grid-column: span 2;
        }

        .chart-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1rem;
            color: var(--gold-primary);
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .chart-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .chart-container {
            position: relative;
            height: 280px;
        }

        .donut-container {
            height: 260px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }

            .main-features {
                grid-template-columns: 1fr;
            }

            .sub-features {
                flex-direction: column;
                align-items: center;
            }

            .main-card {
                padding: 40px 30px;
            }

            .main-card-icon {
                font-size: 4rem;
            }

            .main-card-title {
                font-size: 1.5rem;
            }

            .conclusion-section {
                padding: 30px;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chart-card-wide {
                grid-column: span 1;
            }

            .chart-container {
                height: 250px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">ğŸ® {{ title }}</h1>
            <p class="subtitle">{{ content }}</p>
        </header>

        <!-- Main Feature Cards - í¬ê²Œ ì¤‘ì•™ ë°°ì¹˜ -->
        <section class="main-features">
            <a href="{% url 'match_stories' %}" class="main-card story-card">
                <span class="main-card-icon">ğŸ“–</span>
                <h3 class="main-card-title">ìŠ¤í† ë¦¬ ë³´ê¸°</h3>
                <p class="main-card-desc">
                    8ê°•ë¶€í„° ê²°ìŠ¹ê¹Œì§€, ê° ê²½ê¸°ì˜ ë°´í”½ ì „ëµê³¼<br>
                    ëª…ìŠ¹ë¶€ ìŠ¤í† ë¦¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.
                </p>
                <span class="main-card-arrow">â†’</span>
            </a>

            <a href="{% url 'champion_stats' %}" class="main-card stats-card">
                <span class="main-card-icon">ğŸ“Š</span>
                <h3 class="main-card-title">ì±”í”¼ì–¸ í†µê³„</h3>
                <p class="main-card-desc">
                    2025 ì›”ë“œ ì±”í”¼ì–¸ì‹­ ì‚¬ì „ ë¶„ì„ ë°ì´í„°.<br>
                    ì±”í”¼ì–¸ë³„ í”½ë¥ , Tier Score, ì§„ì˜ ì„ í˜¸ë„ë¥¼ í™•ì¸í•˜ì„¸ìš”.
                </p>
                <span class="main-card-arrow">â†’</span>
            </a>
        </section>

        <!-- Sub Feature Cards - ì‘ê²Œ í•˜ë‹¨ ë°°ì¹˜ -->
        <div class="sub-features">
            <a href="{% url 'champion_stats_api' %}" class="sub-card">
                <span class="sub-card-icon">ğŸ”Œ</span>
                <span class="sub-card-text">API ì—”ë“œí¬ì¸íŠ¸</span>
            </a>
            <a href="/admin/" class="sub-card">
                <span class="sub-card-icon">âš™ï¸</span>
                <span class="sub-card-text">ê´€ë¦¬ì íŒ¨ë„</span>
            </a>
        </div>

        <!-- ğŸ“Š í†µê³„ ê·¸ë˜í”„ ì„¹ì…˜ -->
        <section class="charts-section">
            <h2 class="section-title">ğŸ“Š 2025 ì›”ë“œ ì±”í”¼ì–¸ì‹­ ë°ì´í„° ì¸ì‚¬ì´íŠ¸</h2>

            <div class="charts-grid">
                <!-- Top 10 Tier Score ì°¨íŠ¸ -->
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ† Top 10 ì±”í”¼ì–¸ Tier Score</h3>
                    <p class="chart-desc">ì‚¬ì „ ë¶„ì„ ê¸°ì¤€ ê°€ì¥ ë†’ì€ ê°€ì¹˜ë¥¼ ê°€ì§„ ì±”í”¼ì–¸ ìˆœìœ„</p>
                    <div class="chart-container">
                        <canvas id="tierScoreChart"></canvas>
                    </div>
                </div>

                <!-- ì§„ì˜ ì„ í˜¸ë„ ë¶„í¬ ë„ë„› ì°¨íŠ¸ -->
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ”µğŸ”´ ì§„ì˜ ì„ í˜¸ë„ ë¶„í¬</h3>
                    <p class="chart-desc">ë¶„ì„ ì±”í”¼ì–¸ì˜ ë¸”ë£¨/ë ˆë“œ ì§„ì˜ ì„ í˜¸ë„ ë¹„ìœ¨</p>
                    <div class="chart-container donut-container">
                        <canvas id="sidePreferenceChart"></canvas>
                    </div>
                </div>

                <!-- 1í”½ ë¹„êµ ì°¨íŠ¸ -->
                <div class="chart-card chart-card-wide">
                    <h3 class="chart-title">âš”ï¸ ë¸”ë£¨ vs ë ˆë“œ 1í”½ ë¹„êµ (Top 8 ì±”í”¼ì–¸)</h3>
                    <p class="chart-desc">ì–‘ ì§„ì˜ì—ì„œì˜ 1í”½ ì„ íƒ ë¹ˆë„ ë¹„êµ</p>
                    <div class="chart-container">
                        <canvas id="firstPickChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Conclusion Section -->
        <section class="conclusion-section">
            <span class="conclusion-badge">ğŸ“ ê²°ë¡ </span>
            <h2 class="conclusion-title">
                ì—­ì‹œ <span class="conclusion-highlight">ë°´í”½ì´ ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œì˜ ëª¨ë“  ê²ƒì„ ê²°ì •í•˜ì§€ ì•ŠëŠ”ë‹¤</span>
            </h2>
            <div class="conclusion-content">
                <p>
                    2025 ì›”ë“œ ì±”í”¼ì–¸ì‹­ì˜ ë…¹ì•„ì›ƒ ìŠ¤í…Œì´ì§€ë¥¼ ë¶„ì„í•˜ë©´ì„œ ê°€ì¥ ì¸ìƒì ì´ì—ˆë˜ ê²ƒì€, ë°´í”½ì—ì„œì˜ ìš°ìœ„ê°€ ë°˜ë“œì‹œ ìŠ¹ë¦¬ë¡œ ì´ì–´ì§€ì§€ ì•Šì•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.
                    8ê°• ì  ì§€ vs í•œí™”ìƒëª… 2ì„¸íŠ¸ì—ì„œ í•œí™”ìƒëª…ì€ ì¡°í•©ì ìœ¼ë¡œ ì™„ë²½ì— ê°€ê¹Œìš´ ë°´í”½ì„ ì´ëŒì–´ëƒˆì§€ë§Œ, ì  ì§€ëŠ” 58ë¶„ê°„ì˜ í˜ˆì „ ëì— ê²°ì •ì ì¸ í•œíƒ€ì—ì„œ ì—­ì „ìŠ¹ì„ ê±°ë‘ì—ˆìŠµë‹ˆë‹¤.
                </p>

                <div class="conclusion-quote">
                    "ë°´í”½ì€ ê²½ê¸°ì˜ ì‹œì‘ì¼ ë¿, ëì„ ê²°ì •í•˜ëŠ” ê²ƒì€ ì„ ìˆ˜ë“¤ì˜ ì‹¤ë ¥ê³¼ ì •ì‹ ë ¥ì´ë‹¤."
                </div>

                <p>
                    4ê°•ì—ì„œ KTê°€ ì  ì§€ë¥¼ êº¾ì€ ëŒ€ì´ë³€ ì—­ì‹œ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ê°ê´€ì ì¸ ì „ë ¥ê³¼ ë°´í”½ ë¶„ì„ì—ì„œ ì  ì§€ê°€ ì••ë„ì ìœ¼ë¡œ ìœ ë¦¬í–ˆì§€ë§Œ,
                    KTëŠ” 'ì–¸ë”ë…ì˜ ì €ë ¥'ìœ¼ë¡œ ì´ë¥¼ ê·¹ë³µí–ˆìŠµë‹ˆë‹¤. ê²°ìŠ¹ì—ì„œë„ T1ì€ ë¶ˆë¦¬í•œ ì¡°í•© ìƒí™©ì„ ë’¤ì§‘ìœ¼ë©° 3ì—°ì† ìš°ìŠ¹ì´ë¼ëŠ” ëŒ€ê¸°ë¡ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.
                </p>

                <p>
                    ê²°êµ­ ë¦¬ê·¸ ì˜¤ë¸Œ ë ˆì „ë“œì—ì„œ ë°´í”½ì€ ì¤‘ìš”í•œ ì „ëµì  ë„êµ¬ì´ì§€ë§Œ, ìµœì¢… ìŠ¹íŒ¨ë¥¼ ê°€ë¥´ëŠ” ê²ƒì€ ìˆœê°„ì˜ íŒë‹¨ë ¥, íŒ€ì›Œí¬, ê·¸ë¦¬ê³  ì••ë°• ì†ì—ì„œ ë°œíœ˜ë˜ëŠ” ì„ ìˆ˜ ê°œê°œì¸ì˜ ì—­ëŸ‰ì…ë‹ˆë‹¤.
                    ì´ë²ˆ ì›”ë“œ ì±”í”¼ì–¸ì‹­ì€ ê·¸ ì‚¬ì‹¤ì„ ë‹¤ì‹œ í•œë²ˆ ì¦ëª…í–ˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="conclusion-keywords">
                <span class="conclusion-keyword">#ë°´í”½ë§ŒëŠ¥ë¡ ë°˜ë°•</span>
                <span class="conclusion-keyword">#ì„ ìˆ˜ì—­ëŸ‰</span>
                <span class="conclusion-keyword">#íŒ€ì›Œí¬</span>
                <span class="conclusion-keyword">#ì •ì‹ ë ¥</span>
                <span class="conclusion-keyword">#ì—­ì „ì˜ëª…ìˆ˜</span>
            </div>
        </section>

        <!-- Recent Matches -->
        <section>
            <h2 class="section-title">ìµœê·¼ ë“±ë¡ëœ ê²½ê¸° ëª©ë¡</h2>

            {% if recent_matches %}
            <div class="table-container">
                <table class="match-table">
                    <thead>
                        <tr>
                            <th>ë‚ ì§œ</th>
                            <th>ë‹¨ê³„</th>
                            <th>ê²½ê¸°</th>
                            <th>ìŠ¹ë¦¬ íŒ€</th>
                            <th>ì‹œê°í™”</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in recent_matches %}
                        <tr>
                            <td>{{ item.match.match_date|date:"Y.m.d" }}</td>
                            <td>{{ item.match.get_stage_display }}</td>
                            <td>
                                <a href="{% url 'match_story_detail' stage=item.story_stage match_number=item.story_match_number %}"
                                    class="match-link">
                                    <img src="{% static 'main/images/teams/' %}{{ item.team_a_logo }}"
                                        alt="{{ item.match.team_a.name }}" class="team-logo-small"
                                        onerror="this.style.display='none'">
                                    {{ item.match.team_a.name }}
                                    <span style="color: var(--red-accent);">vs</span>
                                    {{ item.match.team_b.name }}
                                    <img src="{% static 'main/images/teams/' %}{{ item.team_b_logo }}"
                                        alt="{{ item.match.team_b.name }}" class="team-logo-small"
                                        onerror="this.style.display='none'">
                                </a>
                            </td>
                            <td><span class="winner-badge">{{ item.match.winner.name }}</span></td>
                            <td>
                                <a href="{% url 'match_story_detail' stage=item.story_stage match_number=item.story_match_number %}"
                                    class="match-link">
                                    ğŸ“– ìŠ¤í† ë¦¬ ë³´ê¸° â†’
                                </a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="empty-state">
                <h3>ğŸ“­ ì•„ì§ ë“±ë¡ëœ ê²½ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                <p>ê´€ë¦¬ì íŒ¨ë„ì—ì„œ ê²½ê¸° ë°ì´í„°ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
            </div>
            {% endif %}
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>2025 ë¡¤ë“œì»µ ë²¤í”½ ì•„ì¹´ì´ë¸Œ | Data Storytelling Project</p>
        </footer>
    </div>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <script>
        // Chart.js ê¸€ë¡œë²Œ ì„¤ì •
        Chart.defaults.color = '#a09b8c';
        Chart.defaults.borderColor = 'rgba(60, 60, 65, 0.5)';
        Chart.defaults.font.family = "'Noto Sans KR', sans-serif";

        // APIì—ì„œ ë°ì´í„° ê°€ì ¸ì™€ì„œ ì°¨íŠ¸ ë Œë”ë§
        fetch('/api/champions/')
            .then(response => response.json())
            .then(data => {
                const champions = data.champions;

                // Tier Score ê¸°ì¤€ ì •ë ¬ í›„ Top 10 ì¶”ì¶œ
                const sortedByTier = [...champions].sort((a, b) => b.tier_score - a.tier_score).slice(0, 10);

                // 1. Top 10 Tier Score ë°” ì°¨íŠ¸
                const tierScoreCtx = document.getElementById('tierScoreChart').getContext('2d');
                const tierGradient = tierScoreCtx.createLinearGradient(0, 0, 400, 0);
                tierGradient.addColorStop(0, '#785a28');
                tierGradient.addColorStop(0.5, '#c8aa6e');
                tierGradient.addColorStop(1, '#c89b3c');

                new Chart(tierScoreCtx, {
                    type: 'bar',
                    data: {
                        labels: sortedByTier.map(c => c.name),
                        datasets: [{
                            label: 'Tier Score',
                            data: sortedByTier.map(c => c.tier_score),
                            backgroundColor: tierGradient,
                            borderColor: '#c89b3c',
                            borderWidth: 1,
                            borderRadius: 6,
                            borderSkipped: false,
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: 'rgba(17, 24, 39, 0.95)',
                                titleColor: '#c89b3c',
                                bodyColor: '#f0e6d2',
                                borderColor: '#c89b3c',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: (ctx) => `Tier Score: ${ctx.raw}`
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 15,
                                grid: { color: 'rgba(60, 60, 65, 0.3)' },
                                ticks: { color: '#a09b8c' }
                            },
                            y: {
                                grid: { display: false },
                                ticks: {
                                    color: '#f0e6d2',
                                    font: { weight: 500 }
                                }
                            }
                        }
                    }
                });

                // 2. ì§„ì˜ ì„ í˜¸ë„ ë„ë„› ì°¨íŠ¸ - ì§„ì˜ ì„ í˜¸ë„ë³„ ì§‘ê³„
                const sidePreferenceCounts = {
                    'BLUE_MUST': 0, 'BLUE_PREF': 0, 'BLUE_WEAK': 0, 'BALANCED': 0, 'RED_WEAK': 0, 'RED_PREF': 0, 'RED_MUST': 0
                };
                champions.forEach(c => {
                    if (sidePreferenceCounts.hasOwnProperty(c.side_preference_code)) {
                        sidePreferenceCounts[c.side_preference_code]++;
                    }
                });

                const sideCtx = document.getElementById('sidePreferenceChart').getContext('2d');
                new Chart(sideCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['ë¸”ë£¨ í•„ìˆ˜', 'ë¸”ë£¨ ì„ í˜¸', 'ì•½í•œ ë¸”ë£¨', 'ê· í˜•', 'ì•½í•œ ë ˆë“œ', 'ë ˆë“œ ì„ í˜¸', 'ë ˆë“œ í•„ìˆ˜'],
                        datasets: [{
                            data: [
                                sidePreferenceCounts['BLUE_MUST'],
                                sidePreferenceCounts['BLUE_PREF'],
                                sidePreferenceCounts['BLUE_WEAK'],
                                sidePreferenceCounts['BALANCED'],
                                sidePreferenceCounts['RED_WEAK'],
                                sidePreferenceCounts['RED_PREF'],
                                sidePreferenceCounts['RED_MUST']
                            ],
                            backgroundColor: [
                                '#2563eb',  // ë¸”ë£¨ í•„ìˆ˜
                                '#4a90d9',  // ë¸”ë£¨ ì„ í˜¸
                                '#60a5fa',  // ì•½í•œ ë¸”ë£¨
                                '#6b7280',  // ê· í˜•
                                '#f87171',  // ì•½í•œ ë ˆë“œ
                                '#ef4444',  // ë ˆë“œ ì„ í˜¸
                                '#dc2626',  // ë ˆë“œ í•„ìˆ˜
                            ],
                            borderColor: '#0a0e13',
                            borderWidth: 3,
                            hoverOffset: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '55%',
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    padding: 12,
                                    usePointStyle: true,
                                    pointStyle: 'circle',
                                    font: { size: 11 }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(17, 24, 39, 0.95)',
                                titleColor: '#c89b3c',
                                bodyColor: '#f0e6d2',
                                borderColor: '#c89b3c',
                                borderWidth: 1,
                                padding: 12,
                                callbacks: {
                                    label: (ctx) => {
                                        const total = champions.length;
                                        return `${ctx.label}: ${ctx.raw}ê°œ ì±”í”¼ì–¸ (${Math.round(ctx.raw / total * 100)}%)`;
                                    }
                                }
                            }
                        }
                    }
                });

                // 3. ë¸”ë£¨ vs ë ˆë“œ 1í”½ ë¹„êµ ì°¨íŠ¸ (Top 8)
                const top8Champions = sortedByTier.slice(0, 8);
                const firstPickCtx = document.getElementById('firstPickChart').getContext('2d');

                new Chart(firstPickCtx, {
                    type: 'bar',
                    data: {
                        labels: top8Champions.map(c => c.name),
                        datasets: [
                            {
                                label: 'ë¸”ë£¨ 1í”½',
                                data: top8Champions.map(c => c.blue_first_pick),
                                backgroundColor: 'rgba(74, 144, 217, 0.8)',
                                borderColor: '#4a90d9',
                                borderWidth: 1,
                                borderRadius: 4,
                            },
                            {
                                label: 'ë ˆë“œ 1í”½',
                                data: top8Champions.map(c => c.red_first_pick),
                                backgroundColor: 'rgba(239, 68, 68, 0.8)',
                                borderColor: '#ef4444',
                                borderWidth: 1,
                                borderRadius: 4,
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    padding: 16,
                                    usePointStyle: true,
                                    pointStyle: 'rectRounded',
                                    font: { weight: 500 }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(17, 24, 39, 0.95)',
                                titleColor: '#c89b3c',
                                bodyColor: '#f0e6d2',
                                borderColor: '#c89b3c',
                                borderWidth: 1,
                                padding: 12
                            }
                        },
                        scales: {
                            x: {
                                grid: { display: false },
                                ticks: {
                                    color: '#f0e6d2',
                                    font: { weight: 500 }
                                }
                            },
                            y: {
                                beginAtZero: true,
                                max: 5,
                                grid: { color: 'rgba(60, 60, 65, 0.3)' },
                                ticks: {
                                    color: '#a09b8c',
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('ì°¨íŠ¸ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
            });
    </script>
</body>

</html>